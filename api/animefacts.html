<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Anime Facts</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style type="text/css">
body{
  background: #212121;
  color:#FFFFFF;
}
.container{
  margin-top: 1.5em;
  border-top: 10px solid #BDBDBD;
  border-bottom: 10px solid #BDBDBD;
  border-radius: 15px;
  display:flex;
  justify-content:center;
  flex-wrap: wrap;
}

    .facts-container {
      font-size: 29px;
      font-weight:300;
      font-style:oblique;
      border:2px solid #FFFFFF;
      width:400px;
      height:500px;
      margin-top:20px;
      margin-right:15px;
      margin-bottom:15px;
      border-radius: 10px;
    }
    .facts-container > img {
      width:300px;
      height:400px;
    }

    .footer{
      font-size:15px;
      margin-top:22rem;
    }

    
    .loadmore{
	     cursor:pointer;
	     text-decoration:none;
	     float:right;
	     margin:15px; 
	     font-size:19px;
	     color:#BDBDBD;
	     background:#424242; 
	     padding:5px;
	     font-weight:520;
	     border-radius:15px 2px;
	     border:0px;
	     outline:0px;
    }
    .loadmore:hover{
	background: #C6FF00;
	color:#000000;
    }
    a{
      text-decoration: none;
    }
  </style>
</head>
<body>
  <center>
    
    <h2> Know Some Anime Facts For your Good!</h2>

    <div class="container" >

    </div>
      
  </center>

    <button onclick="showWholeList()" class="loadmore" > More Anime</button>

  <script>

function fetchAnimeFacts()
    {

 fetch("https://anime-facts-rest-api.herokuapp.com/api/v1")
  .then(function(response) {
	if (!response.ok){
  	fetchAnimeFacts()	
	    } else  {
		  return response.json();
		}
  })
  .then(function(data) {

	   

	for (var i=0; data.data.length > i ; i++ ){
	      

	      select_parent_element = document.querySelector('.container');
              
	      parent_ofAll= document.createElement('a');

	      new_element = document.createElement('figure');
	     
	      append_nElm = select_parent_element.appendChild(parent_ofAll).appendChild(new_element);
	      
	      create_img = document.createElement('img');

	      create_label =   document.createElement('figcaption');

	      imgs_con = append_nElm.appendChild(create_img); 
		
      	      anime_names = append_nElm.appendChild(create_label);

              append_nElm.id=data.data[i].anime_name;

	      imgs_con.classList.add('facts-container');
	 
	      append_nElm.classList.add('facts-container');

	      document.querySelectorAll('img')[i].src=data.data[i].anime_img;



	      document.querySelectorAll('figcaption')[i].textContent =data.data[i].anime_name;


      document.querySelectorAll("figure")[i].addEventListener("click",function(){

		ID = this.id
		
	
	 fetch(`https://anime-facts-rest-api.herokuapp.com/api/v1/${ID}`)
	      .then(response => response.json())
	      .then(data => {
		    total_facts = data.data.length;
			
		   // randomFact = Math.floor(0+Math.random() * (total_facts+1-0));

		randomFact = Math.floor(Math.random() * (total_facts - 0 + 1)) + 0;
		    
		    getFact = data.data[randomFact].fact;

		     target_div = document.querySelector(`#${ID}`);

		    target_div.style.padding = "2%";
			

		    target_div.innerHTML = `<br><br><br>${getFact}`;

		     

		  })



	})


	      get_alinks = document.querySelectorAll('a')[i];
	      
	      get_alinks.href=`#`+data.data[i].anime_name     

	      get_alinks.style.color = "#FFFFFF";

	      append_nElm.style.cursor="pointer";

	      if (i >= 5){
	      	append_nElm.style.display="none";
	      	append_nElm.style.cursor="pointer";
		  } else {
	      	append_nElm.style.cursor="pointer";
		      }

	    }
	   
	

      });
 

	}


    function showWholeList(){
	  select_con = document.querySelectorAll(".facts-container");
	  for  (var a=0; select_con.length > a ; a++){
		select_all = document.getElementsByClassName("facts-container")[a];
		select_all.style.display = "block";
	      }
	  hide_btn = document.querySelector(".loadmore");
	  hide_btn.style.display = "none";
	}

    window.onload = function(){

    fetchAnimeFacts()


	} 




  </script>
  <center>
  <div class="footer">
    <span>Â© Copyleft 02/07/2022<br> Created By : Sidhartha Mazumder </span>
  </div>
  </center>
</body>
</html>
